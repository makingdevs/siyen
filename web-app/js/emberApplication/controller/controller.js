// Generated by CoffeeScript 1.6.3
(function() {
  App.CursosNuevosController = Ember.ArrayController.extend({
    content: []
  });

  App.CursosNuevosCrearController = Ember.ObjectController.extend({
    needs: ['cursosNuevos'],
    instructores: [],
    puertos: [],
    cursos: [],
    puertoSelected: null,
    instructorSelected: null,
    cursoSelected: null,
    fechaDeInicio: null,
    init: function() {
      this._super();
      this.set('instructores', App.Instructor.find());
      this.set('puertos', App.Puerto.find());
      return this.set('cursos', App.Curso.find());
    },
    crear: function() {
      var cursoProgramado, cursosNuevosController, fechaDeInicio, temporalId, _ref;
      fechaDeInicio = moment((_ref = this.fechaDeInicio) != null ? _ref : moment(), 'DD/MMMM/YYYY');
      cursosNuevosController = this.get('controllers.cursosNuevos');
      temporalId = cursosNuevosController.get('content.length') + 1;
      cursoProgramado = App.CursoProgramado.createRecord({
        id: temporalId,
        fechaDeInicio: fechaDeInicio,
        puerto: this.puertoSelected,
        instructor: this.instructorSelected,
        curso: this.cursoSelected
      });
      cursosNuevosController.get('content').pushObject(cursoProgramado);
      this.set('puertoSelected', null);
      this.set('instructorSelected', null);
      this.set('fechaDeInicio', moment().format('DD/MMMM/YYYY'));
      return this.transitionToRoute('participante', cursoProgramado.id);
    }
  });

  App.ParticipanteController = Ember.ObjectController.extend({
    needs: ['cursosNuevos'],
    content: [],
    nombreCompleto: null,
    observaciones: null,
    agregar: function() {
      var alumno, cursoProgramado, cursosNuevosController;
      cursosNuevosController = this.get('controllers.cursosNuevos');
      cursoProgramado = cursosNuevosController.get('content').get(this.get('content') - 1);
      alumno = App.Alumno.createRecord({
        nombreCompleto: this.get('nombreCompleto'),
        observaciones: this.get('observaciones')
      });
      return cursoProgramado.get('alumnos').pushObject(alumno);
    },
    participantes: (function() {
      var cursoProgramado, cursosNuevosController;
      cursosNuevosController = this.get('controllers.cursosNuevos');
      cursoProgramado = cursosNuevosController.get('content').get(this.get('content') - 1);
      return cursoProgramado.get('alumnos');
    }).property("cursoProgramado.alumnos")
  });

}).call(this);
