// Generated by CoffeeScript 1.6.3
(function() {
  $(".busquedaChosen").chosen({
    disable_search: true,
    search_contains: true,
    display_selected_options: false,
    placeholder_text_single: "Selecciona una opción",
    no_results_text: "Oops, ¡No hubo resultados!"
  });

  ($(".datepicker")).attr('readonly', 'true');

  ($(".datepicker")).val(moment().format('DD/MMMM/YYYY'));

  ($("select")).change(function() {
    var divs;
    if (($(this)).val()) {
      return ($(this)).parent().parent().next().show();
    } else {
      divs = ($(this)).parent().parent().nextAll("div");
      divs.find('select').val(null);
      return divs.hide();
    }
  });

  ($("button")).click(function(e) {
    e.preventDefault();
    return $.ajax({
      type: "POST",
      url: "realizarInforme",
      data: ($("form")).serialize(),
      success: function(response) {
        var chartData, ctx, data, labels;
        labels = [];
        data = [];
        $.each(response, function(k, v) {
          labels.push(k);
          return data.push(v);
        });
        chartData = {
          labels: labels,
          datasets: [
            {
              fillColor: "rgba(151,187,205,0.5)",
              strokeColor: "rgba(151,187,205,1)",
              pointColor: "rgba(151,187,205,1)",
              pointStrokeColor: "#fff",
              data: data
            }
          ]
        };
        ctx = $("#myChart").get(0).getContext("2d");
        return new Chart(ctx).Bar(chartData);
      }
    });
  });

}).call(this);
